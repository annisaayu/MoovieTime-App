import{m as k,r as m,n as M,p as C,o as i,c as r,a as e,b as $,w as U,q as j,T as V,F,s as I,u as N,v as A,_ as D,x as z,y as B,t as b,z as L,A as q,B as P,d as E}from"./BQcZhiqi.js";const O={class:"carousel-container h-[400px] relative overflow-hidden"},Q={class:"carousel mx-auto my-14 mt-20 relative px-14 md:w-[85%] h-[80%] flex items-center"},W=["src"],Y=["src"],Z=["src"],H={id:"indicators",class:"absolute flex gap-4 bottom-10 left-1/2 -translate-x-1/2"},J=["onClick"],K=k({__name:"MovieCarousel",setup(x){const d=A(),o=m([]),n=m(0),c=async()=>{const s=await fetch("https://api.themoviedb.org/3/trending/movie/day?language=en-US",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`bearer ${d.public.tmdbAccessToken}`}});if(!s.ok){console.error("Error fetching data:",s.statusText);return}const t=await s.json();o.value=(t==null?void 0:t.results)??[]},v=s=>{n.value=(n.value+s+o.value.length)%o.value.length},g=s=>{n.value=s},u=M(()=>o.value[(n.value-1+o.value.length)%o.value.length]),h=M(()=>o.value[n.value]),a=M(()=>o.value[(n.value+1)%o.value.length]);return C(c),(s,t)=>(i(),r("div",O,[e("div",Q,[$(V,{name:"carousel-slide",tag:"div",class:"flex w-full justify-center"},{default:U(()=>[u.value?(i(),r("div",{class:"carousel-left scale-y-[0.7] h-full transition-all duration-500",key:u.value.id},[e("img",{class:"carousel-item h-full",src:`https://image.tmdb.org/t/p/w500${u.value.poster_path}`,alt:""},null,8,W)])):j("",!0),h.value?(i(),r("div",{class:"carousel-center scale-y-[0.9] scale-x-[1.7] z-10 translate-y-4 h-full transition-all duration-500",key:h.value.id},[e("img",{class:"carousel-item h-full",src:`https://image.tmdb.org/t/p/w500${h.value.poster_path}`,alt:""},null,8,Y)])):j("",!0),a.value?(i(),r("div",{class:"carousel-right scale-y-[0.7] h-full transition-all duration-500",key:a.value.id},[e("img",{class:"carousel-item h-full",src:`https://image.tmdb.org/t/p/w500${a.value.poster_path}`,alt:""},null,8,Z)])):j("",!0)]),_:1}),e("span",{class:"left absolute top-1/2 left-1 cursor-pointer",onClick:t[0]||(t[0]=_=>v(-1))},t[2]||(t[2]=[e("i",{class:"fa-solid fa-arrow-left text-3xl text-gray-600"},null,-1)])),e("span",{class:"right absolute top-1/2 right-1 cursor-pointer",onClick:t[1]||(t[1]=_=>v(1))},t[3]||(t[3]=[e("i",{class:"fa-solid fa-arrow-right text-3xl text-gray-600"},null,-1)]))]),e("div",H,[(i(!0),r(F,null,I(o.value,(_,f)=>(i(),r("span",{key:"indicator-"+f,class:N(["block w-3 h-3 rounded-md border-2",{"bg-gray-600":n.value===f,"border-gray-600":n.value!==f}]),onClick:S=>g(f)},null,10,J))),128))])]))}}),X=D(K,[["__scopeId","data-v-dbc5d885"]]),ee={class:"discover-filter py-4 text-white bg-gradient-to-b from-custom-color to-custom-color-2 rounded-md"},te={class:"px-6 py-4 border-bottom-opc"},se={class:"p-6"},oe={class:"inline-flex justify-between w-full"},ne=["value"],ae=k({__name:"DiscoverFilter",emits:["updateSort","updateFilter"],setup(x,{emit:d}){const o=A(),n=m("popularity.desc"),c=m([]),v=m([]),g=d;C(async()=>{const a=await fetch("https://api.themoviedb.org/3/genre/movie/list",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`bearer ${o.public.tmdbAccessToken}`}});if(!a.ok){alert("failed fetch genre");return}const s=await a.json();v.value=(s==null?void 0:s.genres)??[]});const u=()=>g("updateSort",n.value),h=()=>g("updateFilter",c.value);return(a,s)=>(i(),r("div",ee,[s[3]||(s[3]=e("div",{class:"px-6 border-bottom-opc"},[e("h2",{class:"text-lg font-semibold mb-4"},"Sort Result By")],-1)),e("div",te,[z(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>n.value=t),onChange:u,class:"w-full p-2 rounded bg-gray-800 text-white mt-2 mb-4"},s[2]||(s[2]=[e("option",{value:"popularity.desc"},"Popularity",-1),e("option",{value:"vote_average.desc"},"Ratings",-1),e("option",{value:"primary_release_date.desc"},"Release Date",-1)]),544),[[B,n.value]])]),s[4]||(s[4]=e("div",{class:"px-6 border-bottom-opc"},[e("h2",{class:"text-lg font-semibold my-4"},"Genres")],-1)),e("div",se,[(i(!0),r(F,null,I(v.value,t=>(i(),r("div",{key:t.id,class:"mb-2"},[e("label",oe,[e("span",null,b(t.name),1),z(e("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":s[1]||(s[1]=_=>c.value=_),onChange:h},null,40,ne),[[L,c.value]])])]))),128))])]))}}),le=D(ae,[["__scopeId","data-v-bdb8ead4"]]),ie=q("/images/Star.png"),re={class:"discover-cards grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 gap-4 p-0"},ce={class:"img-card bg-background-transparent relative rounded overflow-hidden min-w-48 max-h-[370px] min-h-[370px] flex items-center justify-center"},de=["src","alt"],ue={class:"absolute py-8 inset-0 flex flex-col items-center justify-around gap-2 opacity-0 group-hover:opacity-100 bg-black-80 transition-opacity duration-300"},pe={class:"flex text-2xl font-bold"},ve={class:"px-3 text-lg text-center font-bold"},ge={class:"flex flex-col items-center justify-center gap-4"},me=["onClick"],he=["onClick"],_e=["onClick"],fe={class:"absolute rating top-0 right-0 bg-background-accent2 text-white px-2 py-1 text-sm font-semibold group-hover:opacity-0"},be={class:"text-text-heading font-semibold mt-2"},xe={class:"text-text-subheading"},ye=k({__name:"DiscoverCard",props:{movies:{type:Array,required:!0},fetchMoreMovies:{type:Function,required:!0},addedMovieIDs:{type:Array}},emits:["onAddMovie"],setup(x,{emit:d}){const o=P(),n=d,c=x,v=()=>c.fetchMoreMovies(),g=a=>{n("onAddMovie",a.id),console.log(`Added movie: ${a.title}`)},u=a=>a.replace(/[^a-zA-Z0-9 ]/g,"").trim(),h=(a,s)=>{let t=u(s).split(" ").join("-").toLocaleLowerCase();o.push(`/movie/${a}-${t}`)};return(a,s)=>(i(),r("div",re,[(i(!0),r(F,null,I(x.movies,t=>{var _;return i(),r("div",{key:t.id,class:"movie-card group"},[e("div",ce,[e("img",{src:t.poster_path?`https://image.tmdb.org/t/p/w500${t.poster_path}`:"/images/moovietime-logo-grey@2x.png",alt:t.title,class:"w-full h-full object-cover"},null,8,de),e("div",ue,[e("span",pe,[s[0]||(s[0]=e("img",{src:ie,class:"mr-2"},null,-1)),E(" "+b(Number(t.vote_average.toFixed(1))),1)]),e("p",ve,b(t.genre_names?t.genre_names.join(", "):""),1),e("div",ge,[e("button",{onClick:f=>h(t.id,t.original_title),class:"px-10 py-1 bg-red text-white rounded-full font-semibold hover:bg-red-700"}," VIEW ",8,me),(_=x.addedMovieIDs)!=null&&_.includes(t.id)?(i(),r("button",{key:1,onClick:f=>g(t),class:"px-10 py-1 border border-white bg-green-200 text-green rounded-full font-semibold"}," ADDED ",8,_e)):(i(),r("button",{key:0,onClick:f=>g(t),class:"px-10 py-1 border border-white text-white rounded-full font-semibold hover:bg-darkgrey"}," ADD ",8,he))])]),e("span",fe,b(Number(t.vote_average.toFixed(1))),1)]),e("h3",be,b(t.title),1),e("span",xe,b(new Date(t.release_date).getFullYear()),1)])}),128)),e("div",{class:"col-span-full flex justify-center mt-4"},[e("button",{onClick:v,class:"px-14 py-2 bg-red text-white rounded-full font-semibold hover:bg-red-700"}," Load More ")])]))}}),we=D(ye,[["__scopeId","data-v-46d2e8cc"]]),$e={class:"relative mt-14"},ke={class:"discover relative container mx-auto pt-10 z-10"},Me={class:"flex justify-between px-4"},Ce={class:"flex gap-2 items-center"},Ae={class:"rounded-full text-text-heading bg-black-20 py-1 px-3"},De={class:"discover-page flex mt-10"},Te={class:"w-1/5 p-4"},je={class:"w-4/5 p-4"},Fe=k({__name:"index",setup(x){const d=m([]),o=m(1),n=m("popularity"),c=m([]),v=m([]),g=A(),u=m([]),h=async()=>{const l=await(await fetch("https://api.themoviedb.org/3/genre/movie/list",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`bearer ${g.public.tmdbAccessToken}`}})).json();return v.value=l.genres,l.genres},a=async()=>{try{const p=c.value.join(","),l=await fetch(`https://api.themoviedb.org/3/discover/movie?page=${o.value}&sort_by=${n.value}&with_genres=${p}&language=en-US`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`bearer ${g.public.tmdbAccessToken}`}});let y=v.value;y.length===0&&(y=await h());const G={};y.forEach(w=>{G[w.id]=w.name});let T=(await l.json()).results;T=T.map(w=>({...w,genre_names:w.genre_ids.map(R=>G[R]||"Unknown")})),d.value=[...d.value,...T]}catch(p){console.error("Failed to fetch movies:",p)}},s=async p=>{let l=u.value;l.includes(p)?l=l.filter(y=>y!==p):l=[...l,p],u.value=[...l]},t=()=>{o.value+=1,a()},_=p=>{n.value=p,o.value=1,d.value=[],a()},f=p=>{c.value=p,o.value=1,d.value=[],a()},S=M(()=>d.value);return C(a),(p,l)=>(i(),r("div",$e,[e("div",ke,[e("div",Me,[l[1]||(l[1]=e("div",null,[e("div",{class:"strip mb-3"}),e("h1",{class:"text-2xl font-bold"},"Discover Movies")],-1)),e("div",Ce,[l[0]||(l[0]=e("p",null,"My Movies",-1)),e("div",Ae,[e("strong",null,b(u.value.length),1),E(" "+b(u.value.length>1?"movies":"movie"),1)])])]),e("div",De,[e("div",Te,[$(le,{onUpdateSort:_,onUpdateFilter:f})]),e("div",je,[$(we,{movies:S.value,fetchMoreMovies:t,onOnAddMovie:s,addedMovieIDs:u.value},null,8,["movies","addedMovieIDs"])])])]),l[2]||(l[2]=e("div",{class:"ml-4 accent absolute top-0 w-full h-[300px] bg-background-transparent"},null,-1))]))}}),Ie=D(Fe,[["__scopeId","data-v-bb7cce6f"]]),Se={class:""},Ge={class:"min-h-full py-24 text-white"},Re=k({__name:"index",setup(x){const d=A(),o=m([]);return C(async()=>{const n=await fetch("https://api.themoviedb.org/3/discover/movie?",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`bearer ${d.public.tmdbAccessToken}`}});if(!n.ok){alert("failed fetch data");return}const c=await n.json();o.value=(c==null?void 0:c.results)??[]}),(n,c)=>{const v=X,g=Ie;return i(),r("div",Se,[e("div",Ge,[$(v),$(g)])])}}});export{Re as default};
